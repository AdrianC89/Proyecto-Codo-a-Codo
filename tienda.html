<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Mercadillo!</title>
    <link rel="stylesheet" href="estilos/estiloprincipal.css">
    <link rel="stylesheet" href="estilos/estiloencabezado.css">
    <link rel="stylesheet" href="estilos/estilotienda.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dongle:wght@300&family=Roboto:wght@100&family=Teko:wght@500&display=swap" rel="stylesheet">

<script defer src="Javascript/tienda.js"></script>
<script defer src="Javascript/carrito.js"></script>
<script defer src="Javascript/filtrotienda.js"></script>
 
</head>

<!-- Cuerpo principal de la página -->
<body>
    <!-- Encabezado de la página (logo y menu de navegación) -->
    <header> 
        <div class="encabezado-logo">
            <a href="index.html"><img id="imagenlogo" src="imagenes/logopagina.png" alt="logoprincipal"></a>
        </div> 
        
        <input type="checkbox" id="menu-check">
            <label id="menu" for="menu-check">
                <span id="menu-abrir">&#9776;</span>
                <span id="menu-cerrar">X</span>
            </label>
        <nav class="encabezado-nav">
    
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="tienda.html">Tienda</a></li>
                <li><a href="contact.html">Contacto y FAQ</a></li>
                <li><a href="about-us.html">Sobre Nosotros</a></li>
            </ul>

        </nav>
        <div class="compras"><h2><div id="iconcarrito"> <i class="fas fa-shopping-cart"></i></div></h2>
        <h2><div id="total-carrito"> </div></h2>
        <p><button id="fincompra" onclick="finalizarCompra()">Finalizar compra</button></p>
        </div>
        
        
        
    </header>

    <!-- Cuerpo principal de la página, aca encontramos todo el contenido -->
    <main class="productos-container">
        <div class="contenedorfiltro">
          <h3>Que estas buscando?</h3>
        
           <input type="radio" name="filtroCategoria" value="todos" id="todo" checked><label for="todo">Todos</label>
          <br>
          
            <input type="radio" name="filtroCategoria" value="celulares" id="cel"><label for="cel">Smartphones</label>
            <br>
          
            <input type="radio" name="filtroCategoria" value="hogar" id="miniele"><label for="miniele">Pequeños Electros</label>
            <br>
          
            <input type="radio" name="filtroCategoria" value="electronicos" id="elec"><label for="elec">Electrodomésticos</label>
            <br>

            <input type="radio" name="filtroCategoria" value="notebook" id="note"><label for="note">Notebooks</label>
            <br>
            <input type="radio" name="filtroCategoria" value="Gaming" id="game"><label for="game">Gaming</label>
            <br>
        </div>
        
      <div id="resultados"></div>
    
    
      <script>
        // Obtener la referencia al contenedor de productos en la página tienda.html
        var contenedorProductos = document.getElementById('resultados');

        // Realizar la solicitud GET a listado.html para obtener los datos de los productos
        fetch('https://adrian89.pythonanywhere.com/productos')
            .then(function (response) {
                if (response.ok) {
                    return response.json(); // Parsear la respuesta JSON
                } else {
                    throw new Error('Error al obtener los productos.');
                }
            })
            .then(function (data) {
                // Iterar sobre los datos de los productos y generar el contenido dinámico
                data.forEach(function (producto) {
                    var productoHTML = `
                        <div class="producto" data-nombre="Celular" data-categoria="celulares">
                            <h3>${producto.descripcion}</h3>
                            <img src="imagenes/productos/${producto.codigo}.jpg" alt="${producto.descripcion}">
                            <p class="peso"><span><b>$</b></span></p>
                            <p class="precio" id="precio-${producto.codigo}">${producto.precio}</p>
                            <div class="descripcion" style="display: none;">
                                <p>${producto.descripcion}</p>
                            </div>
                            <button onclick="mostrarDescripcion(this)">Mostrar Descripción</button>
                            <button onclick="agregarAlCarrito('${producto.descripcion}', 'precio-${producto.codigo}')">Agregar al carrito</button>
                            <button onclick="borrarDelCarrito('${producto.descripcion}', 'precio-${producto.codigo}')">Borrar del Carrito</button>
                        </div>
                    `;
                    contenedorProductos.innerHTML += productoHTML; // Agregar el producto al contenedor
                });
            })
            .catch(function (error) {
                console.log('Error al obtener los productos:', error);
            });
    </script>


          <br>
          <div class="ubicacion">
            <h3>Visitanos en Avenida Siempre Viva 1234 - Springfield</h3>
            <p><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d10579.027951394719!2d-57.58375742150409!3d-37.97330587169339!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9584d9149da44a21%3A0xe9705fdef6db1f4a!2sCarnicos%20Del%20Sur!5e0!3m2!1ses!2sar!4v1683838667995!5m2!1ses!2sar"  allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"  ; ></iframe></p></div>
            
          </div>
</main>     
        
    

<script>


</script>
		
    <footer> 
      <div>
        <a href="https://es-la.facebook.com/" target="_blank" rel="noopener noreferrer"><img src="imagenes/faceicon.png" alt=""></a>
        <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer"><img src="imagenes/twiticon.png" alt=""></a>
        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer"><img src="imagenes/instaicon.png" alt=""></a>
        <a href="http://github.com" target="_blank" rel="noopener noreferrer"><img src="imagenes/giticon.png" alt=""></a>
        
      
    
        <br><h3>© Copyright 2023, El Mercadillo!. Todos los derechos reservados.</h3>
    </div>
      
        

    </footer>

</body>
</html>
